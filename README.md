# webAI CLI

The webAI CLI is the developer entry point into the webAI platform.

This tool is currently in beta - we welcome bug reports and feature requests
through GitHub issues.

## Installation

You can install the CLI using [homebrew](https://brew.sh/):

```shell
brew tap thewebAI/webai
brew install webai
```

To update to the latest version at any point, run:

```shell
brew update
brew upgrade webai
```

### Dependencies

This CLI depends on Navigator already being installed, which you can obtain from
[our website](https://www.webai.com/).

To work with elements, `python` should be installed and included in your shell's
`$PATH`.

`uv` is optional but recommended as it generally executes much faster than
`pip`. You can find installation instructions for both package managers here:

- `pip` installation: [docs](https://pip.pypa.io/en/stable/installation/)
- `uv` installation: [docs](https://github.com/astral-sh/uv#installation)

## Usage

Run `webai help` to get started.

## Building elements

Elements are Python programs that can be imported into Navigator and included in
your flows.

The process of building a new element is the following:

1. Run `webai element init` to generate a folder containing element boilerplate
2. Iterate on the element logic
3. Run `webai element import <path to element>` to import the element into
   Navigator
   - If this is not the first time importing it, make sure to bump its version
     first (in your `Element()` class instantiation)
4. Repeat from step 2

### Element SDK

Elements depend on the `webai_element_sdk` library to interact with the
platform.

This library exposes everything you need to define your element's inputs,
outputs, settings, and execution logic.

For a quick walkthrough, check the source code generated by
`webai element init`.

#### Decorators

##### Executor

```python
@element.executor
async def run(ctx: Context[Inputs, Outputs, Settings]):
    print("Your main logic goes here...")
```

The `@element.executor` decorator defines the function that will run your
element's main logic.

This function will get called for every tick of your flow, when:

- new inputs are ready (if you element has input ports)
- elements connected to an output port are ready to receive new inputs (if your
  element has output ports)

You can send values through your element's outputs using:

```python
yield ctx.outputs.out1(value)
```

Where `out1` is the name of your output as included in your
`class Outputs(ElementOutputs)` definition, and `value` is the value you want to
send through to the following element.

##### Startup

```python
@element.startup
async def startup(ctx: Context[Inputs, Outputs, None]):
    print(f"Starting...")
```

The `@element.startup` decorator optionally defines a function that is called at
the start of flow execution, before the executor function is called for the
first time.

##### Shutdown

```python
@element.shutdown
async def shutdown(ctx: Context[Inputs, Outputs, None]):
    print(f"Shutting down...")
```

The `@element.startup` decorator optionally defines a function that is called at
the end of flow execution, after the executor function has been called for the
last time.

#### Element Settings

Element settings allow you to expose configurable parameters that users can
adjust through the Navigator UI. Settings are defined in a `Settings` class that
inherits from `ElementSettings`.

Each setting provides optional parameters to further customize UI appearance.

##### Boolean Settings

```python
# Booleans are implemented as a toggle button
boolean_setting = BoolSetting(
    name="boolean_setting",
    display_name="Boolean Setting",
    default=True
)
```

##### Number Settings

```python
# Integer settings by default are displayed as input fields
integer_setting = NumberSetting[int](
    name="integer_setting",
    display_name="Integer Setting",
    default=256,
    min_value=0,
    max_value=1024,
    step=1,
)

# Providing "valid_values" creates a dropdown setting
dropdown_setting_with_int_values = NumberSetting[int](
    name="dropdown_setting_with_int_values",
    display_name="Int Dropdown Setting",
    valid_values=[0, 1, 2, 3, 4, 5],
    default=1,
)

# Float settings by default are displayed as sliders
float_setting = NumberSetting[float](
    name="float_setting",
    display_name="Float Setting",
    default=0.1,
    min_value=0,
    max_value=1,
    step=0.01,
)

# Providing "valid_values" creates a dropdown setting
dropdown_setting_with_float_values = NumberSetting[float](
    name="dropdown_setting_with_float_values",
    display_name="Float Dropdown Setting",
    valid_values=[0.0, 0.1, 0.2, 0.3, 0.4, 0.5],
    default=0.1,
)
```

##### Text Settings

```python
# Text settings by default are displayed as input fields
text_setting = TextSetting(
    name="text_setting",
    display_name="Text Setting",
    default="Hello, World!",
)

# Providing "valid_values" creates a dropdown setting
dropdown_setting_with_text = TextSetting(
    name="dropdown_setting_with_text",
    display_name="Text Dropdown Setting",
    valid_values=["Option 1", "Option 2", "Option 3"],
    default="Option 2",
)

# Example file path setting
file_path_setting = TextSetting(
    name="file_path_setting",
    display_name="File Path Setting",
    default="~/path/to/my/file.txt",
    hints=["file_path"]
)

# Example folder path setting
folder_path_setting = TextSetting(
    name="folder_path_setting",
    display_name="Folder Path Setting",
    default="~/path/to/my/folder",
    hints=["folder_path"]
)
```
